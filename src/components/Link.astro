---
import type { HTMLAttributes } from "astro/types";

export type Props = Omit<HTMLAttributes<"a">, "target" | "rel"> & {
	class?: string;
	isExternal?: boolean;
};

const { class: className, href, isExternal, ...restProps } = Astro.props;
---

<a
	class:list={["link", className]}
	href={href}
	target={isExternal ? "_blank" : undefined}
	rel={isExternal ? "noopener noreferrer" : undefined}
	{...restProps}
>
	<slot />
	<span class="sr-only">{isExternal && "別窓で開く"}</span>
</a>

<style scoped>
	.link[target="_blank"] {
		display: grid;
		grid-template-columns: 1fr auto;
		column-gap: 0.25rem;
		align-items: center;
		&:after {
			content: "";
			mask-image: var(--icon-open-in-new);
			mask-size: contain;
			mask-repeat: no-repeat;
			mask-position: center;
			display: inline-block;
			width: 1em;
			height: 1em;
			background-color: currentColor;
		}
	}
</style>
